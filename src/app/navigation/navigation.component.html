<div class="app-wrapper">
    <div class="sidenav" [ngClass]="{'hide-sidebar': hideSideBar}">
        <div class="logo">
            <img class="img" src="assets/images/logo.jpg" alt="logo">
        </div>
        <div class="nav-links">
            <ng-template [ngForOf]="userMenu" let-item ngFor>
                <div class="nav-item">
                    <div *ngIf="item.children.length" class="menu-link" matRipple routerLinkActive="active" (click)="openAsidePanel(item)">
                         <i [class]="'nav-icon fad fa-'+item.icon"></i>
                        <span>{{item?.name}}</span>
                    </div>

                    <div *ngIf="!item.children.length" class="menu-link no-outline" matRipple routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" [routerLink]="item.link">
                        <i [class]="'nav-icon fad fa-'+item.icon" ></i>
                        <span>{{item?.name}}</span>
                    </div>
                </div>
            </ng-template>
        </div>
    </div>

    <div class="sidenav-content" id="content">
        <div class="sidenav-content-header">
            <div class="flex">
                <button
                    type="button"
                    aria-label="Toggle sidenav"
                    mat-icon-button
                    (click)="toggle()">
                    <i class="fal fa-bars text-white"></i>
                </button>
                <!-- <div class="pt-2 pl-3">
                    <h4 class="text-white">Typography</h4>
                </div> -->
                <div class="d-flex flex a-center">
                    <ng-container appPortalTarget="header"></ng-container>
                </div>
            </div>

            

            <div>
                <button mat-button  [dropdown]="notification">
                    <i class="fal fa-bell text-white"></i>
                </button>


                <button mat-button [dropdown]="profile">
                    <i class="fal fa-user-circle text-white"></i>
                </button>

                <app-dropdown #notification>
                    <div class="notifications">
                        <div class="header">Latest Updates</div>
                    </div>
                </app-dropdown>

                <app-dropdown #profile>
                    <div class="profile-details">
                        <div class="flex justify-start">
                            <div class="mr-3">
                                <img class="inline-block h-16 w-16 shadow-sm rounded-full ring-2 ring-white" src="https://images.unsplash.com/photo-1491528323818-fdd1faba62cc?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80" alt="">
                            </div>
                            <div class="pt-2">
                                <p class="mb-0">{{(useService.user | async)?.name}}</p>
                                <small>{{(useService.user | async)?.email}}</small>
                            </div>
                        </div>
                        <div class="flex justify-center">
                            <button class="text-2xl" mat-button (click)="changePassword()" >
                                <i class="fal fa-user-cog"></i>
                            </button>
                            <button class="text-2xl" (click)="logout()" mat-button mat-ripple>
                                <i class="fal fa-lock"></i>
                            </button>
                        </div>
                    </div>
                </app-dropdown>


    
                <app-dropdown #profisle borderRadius="medium">
                    <div class="profile row j-start a-center">
                        <img class="image" src="/assets/images/logo.jpg" alt="avator">
                        <div class="profile-data px-24 text-center">
                            <p>{{(useService.user | async)?.name}}</p>
                            <small>{{(useService.user | async)?.email}}</small>
                        </div>
                    </div>
                    <div class="column actions">
                        <div class="row item border-bottom" matRipple dropdownItem (click)="changePassword()">
                            <mat-icon class="fad fa-unlock-alt"></mat-icon>
                            <p>Change Password</p>
                        </div>
                        <div class="row item border-bottom" matRipple (click)="changeTheme()">
                            <mat-icon class="fad fa-moon"></mat-icon>
                            <p class="flex mr-1">Change Theme</p>
                            <i class="fad fa-toggle-{{darkTheme ? 'on' : 'off'}}" style="font-size: 24px"></i>
                        </div>
                        <div class="row item" matRipple (click)="logout()">
                            <mat-icon class="fad fa-sign-out-alt"></mat-icon>
                            <p>Log Out</p>
                        </div>
                    </div>
                </app-dropdown>
            </div>

        </div>
        <div class="content">
            <router-outlet></router-outlet>
        </div>
    </div>
</div>



<div
    class="navigation-aside"
    *ngIf="openAside"
    @fadeInLeft
    @fadeOutLeft
>
    <div class="aside-nav-items">
        <ng-template ngFor let-menu [ngForOf]="selectedMenu?.children">

            <ng-container *ngIf="menu.children.length; else otherMenu">
                <app-collapse-item [url]="url" [key]="menu.name" [icon]="menu.icon" [title]="menu.name">
                    <a class="aside-item"
                       appCollapseItem matRipple
                       *ngFor="let item of menu.children"
                       [ngClass]="{'active': item.link == url}"
                       [routerLink]="item.link">
                        <span class="name small" style="padding-left: 40px">{{item.name}}</span>
                    </a>

                </app-collapse-item>
            </ng-container>

            <ng-template #otherMenu>
                <a class="aside-item"
                   matRipple
                   [ngClass]="{'active': menu.link == url}"
                   [routerLink]="menu.link">
                    <i [class]="'icon fal fa-'+menu.icon"></i>
                    <span class="name">{{menu.name}}</span>
                </a>
            </ng-template>

        </ng-template>
    </div>
</div>
